<!DOCTYPE html>
<html>

{% set theme =  getThemeProperties() %}
{% set css = 'join'  %}
{% if app.request.cookies.get('DARK_MODE') is defined and app.request.cookies.get('DARK_MODE') == 1 %}
    {% set css = 'joinBlack'  %}
{% endif %}
{% include'base/__head.html.twig' with {'css': css} %}

{% set image = pexelsImage() %}

<body style="background-color: #C9C9C9"
        {% if app.request.cookies.get('DARK_MODE') is defined and app.request.cookies.get('DARK_MODE') == 1 %}
    class="blackMode"{% endif %}>
<style>
    {% if server
    is defined and
    server is not null and
    server|validateLicense and
    server.showStaticBackgroundColor and
    server.staticBackgroundColor is not null %}
    .imageBackground {
        background-color: {{ server.staticBackgroundColor }};
    }

    {% elseif image is not null %}
    .imageBackground {
        background-image: url("{{ image['src']['original'] }}?auto=compress&cs=tinysrgb&w=1920");
    }

    {% endif %}


</style>


<div id="mainContent" class="wrapper">
    <div class="window" id="window">
        <div class="navigation z-depth-1">
            <a href="{{ path('index') }}">
                {% if theme %}
                    <img class="d-none d-sm-block" src="{{ theme.logo }}" alt="Logo"
                         style="height: 50px; width: auto">
                    <img class="d-block d-sm-none" src="{{ theme.logo }}" alt="Logo"
                         style="height: 50px; width: auto">
                {% else %}
                    <img class="d-none d-sm-block" src="{{ asset('logo.png') }}" alt="Logo"
                         style="height: 50px; width: auto">
                    <img class="d-block d-sm-none" src="{{ asset('logo_small.png') }}" alt="Logo"
                         style="height: 50px; width: auto">
                {% endif %}

            </a>
            {% if theme != false %}
                <p style="margin-bottom: 0; color:{{ theme.headerLineColor }}" class="d-none d-lg-block">
                    {{ theme.headerLine }}
                </p>

            {% endif %}
            {{ include('join/__navbar.html.twig') }}

        </div>

        <div class="main" id="main">
            <div class="imageBackground"></div>
            <div class="mainContent">

                {% block container %}
                <div class="container mb-5">
                    {% endblock %}
                    {% block body %}{% endblock %}
                    <div class="row justify-content-center">
                        {% block mainRow %}
                        <div class="col-lg-10 ">
                            {% endblock %}
                            <div class="card frozenGlas">
                                <div class="glossy"></div>
                                <div class="card-body">
                                    <div class="row ">

                                        <div class="col-md-12 align-items-center d-flex">
                                            <h3 class="h3-responsive text-center w-100"> {% block header %}{% endblock %}</h3>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row mb-5">


                                        {% block content %}{% endblock %}


                                    </div>

                                    <div class="row">
                                        <div class="col-12 text-center">
                                            {% if not server %}
                                                <p>
                                                    {% trans %}Wer eine datenschutzfreundliche Videokonferenz Plattform sucht die auf dem eigenen Server betrieben wird ist mit dem Open Source Tool Jitsi gut bedient. Jitsi ist eine Alternative zu Zoom. Sie speichert keine Nutzerdaten und ermöglicht die verschlüsselte Anwendung.{% endtrans %}
                                                </p>
                                            {% endif %}
                                        </div>
                                    </div>

                                </div>
                                {{ include('join/__frozenGlasContent.html.twig') }}
                            </div>
                            {% if server and server|roomsinFuture|length > 0 %}
                                {{ include('join/__publicRooms.html.twig') }}
                            {% endif %}
                            {% if theme == false or theme.joinPageFooter == true %}
                                {{ include('join/__footer.html.twig') }}
                            {% endif %}
                        </div>

                    </div>
                </div>


            </div>

        </div>
        <div class="footer z-depth-1">
            {{ include('base/__footer.html.twig') }}
        </div>

        {% block back %}{% endblock %}


        {{ include('base/__snack.html.twig') }}
    </div>
    {{ include('base/__matomoOptOut.html.twig') }}
</div>
<div class="modal fade" id="loadContentModal" data-backdrop="static" tabindex="-1" role="dialog"
     aria-labelledby="loadContentModal"
     aria-hidden="true">
</div>
<script>
    var confirmTitle = "{{ 'confirm.title'|trans }}";
    var confirmCancel = "{{ 'confirm.cancel'|trans }}";
    var confirmOk = "{{ 'confirm.ok'|trans }}";
    {% if app.request.cookies.get('DARK_MODE') ==""  %}

    function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(';');
        for(let i = 0; i <ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    }
    function setCookie(cname, cvalue, exdays) {
        const d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        let expires = "expires="+ d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }
        setCookie('DARK_MODE', {{ laf_darkmodeAsDefault }},700);
        location.reload();
    {% endif %}
</script>
{% block script %}
{% endblock %}
{% block webpack %}
    {{ encore_entry_script_tags('frontend') }}
{% endblock %}

</body>

</html>
