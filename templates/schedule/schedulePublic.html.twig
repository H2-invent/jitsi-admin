{% extends 'join/base.html.twig' %}

{% block content %}


    <style>
        {% if server is defined and  server is not null and server|validateLicense and server.showStaticBackgroundColor and server.staticBackgroundColor is not null %}
        .imageBackground {
            background-color: {{ server.staticBackgroundColor }};
            position: fixed;
            background-repeat: no-repeat;
            background-size: cover;
            height: 100%;
            width: 100%;
            background-position: center;
        }

        {% elseif image is not null %}
        .imageBackground {
            background-image: url("{{ image['src']['original'] }}?auto=compress&cs=tinysrgb&w=1920");
            position: fixed;
            background-repeat: no-repeat;
            background-size: cover;
            height: 100%;
            width: 100%;
            background-position: center;
        }

        {% endif %}
        @supports (-webkit-appearance:none) {
            .frozenGlas {
                background-color: rgba(255, 255, 255, 0.8);
                backdrop-filter: blur(5px);
            }
        }

        @supports (-moz-appearance:none) {
            .frozenGlas {
                background-color: white;

            }
        }


    </style>
    <div class="row justify-content-center">
        <div class="col-lg-10 ">
            <div class="card frozenGlas">
                <div class="glossy"></div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 text-center text-md-left mb-2 mb-md-0"
                             style="display: flex; justify-content: center; align-items: center">
                            {% if server is defined and  server is not null and server|validateLicense %}
                                {% if server.logoUrl is not null %}
                                    <img src="{{ server.logoUrl }}" style="width: 100%">
                                {% endif %}
                            {% else %}
                                <img src="{{ asset('logo.png') }}" style="width: 100%">
                            {% endif %}
                        </div>
                        <div class="col-md-6">
                            <h1 class="h1-responsive text-center">{{ room.name }}</h1>

                        </div>
                    </div>

                    <hr>

                    <div class="row mb-5">

                        <div class=" col-sm-12 offset-lg-1 col-lg-10">
                            <p class="text-center text-md-left">
                                {{ 'Welcher Termin passt für Sie am besten?'|trans }}
                            </p>
                            <div class="scrollHorizontal mt-4 mb-4">
                                <div class=" d-flex">
                                    {% set locale =  app.request.locale %}
                                    {% for s in scheduling.schedulingTimes %}
                                        <div class="scrollEle mr-3 text-center">
                                            <small>{{ s.time|format_date(pattern="EE",locale=locale) }}</small>
                                            <p>{{ s.time|date('d.m.Y') }}</p>
                                            <hr>
                                            <b>{{ s.time|date('H:i') }} - {{ s.time|date_modify("+"~room.duration~"min")|date('H:i') }}</b><br>
                                            <small>{{ 'Ja'|trans }}: {{ scheduleNumber(s,0) }}</small><br>
                                            <small>{{ 'Nein'|trans }}: {{ scheduleNumber(s,1) }}</small><br>
                                            <small>{{ 'Vielleicht'|trans }}: {{ scheduleNumber(s,2) }}</small><br>
                                            <div class="row">
                                                <div class="col-lg-12 mb-3 mt-2 text-left">
                                                    <div class="custom-control custom-radio">
                                                        <input data-uid="{{ user.id }}" data-schedule="{{ s.id }}"
                                                               data-url="{{ path('schedule_public_vote') }}"
                                                               data-type="0" type="radio" class="custom-control-input scheduleSelect"
                                                               id="schedule-{{ s.id }}-yes"
                                                               name="scheduleGroup-{{ s.id }}"
                                                               {% if scheduleOwnJoice(user,s) is same as 0 %}checked{% endif %}>
                                                        <label class="custom-control-label"
                                                               for="schedule-{{ s.id }}-yes">{{ 'Ja'|trans }}</label>
                                                    </div>
                                                    <div class="custom-control custom-radio">
                                                        <input data-uid="{{ user.id }}" data-schedule="{{ s.id }}"
                                                               data-url="{{ path('schedule_public_vote') }}"
                                                               data-type="1" type="radio" class="custom-control-input scheduleSelect"
                                                               id="schedule-{{ s.id }}-no"
                                                               name="scheduleGroup-{{ s.id }}"
                                                               {% if scheduleOwnJoice(user,s) is same as 1 %}checked{% endif %}>
                                                        <label class="custom-control-label"
                                                               for="schedule-{{ s.id }}-no">{{ 'Nein'|trans }}</label>
                                                    </div>
                                                    <div class="custom-control custom-radio">
                                                        <input data-uid="{{ user.id }}" data-schedule="{{ s.id }}"
                                                               data-url="{{ path('schedule_public_vote') }}"
                                                               data-type="2" type="radio" class="custom-control-input scheduleSelect"
                                                               id="schedule-{{ s.id }}-maybe"
                                                               name="scheduleGroup-{{ s.id }}"
                                                               {% if scheduleOwnJoice(user,s) is same as 2 %}checked{% endif %}>
                                                        <label class="custom-control-label"
                                                               for="schedule-{{ s.id }}-maybe">{{ 'Vielleicht'|trans }}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="row form-group">

                                <div class="col-12">
                                    <p class="small">
                                        {% if server and server.privacyPolicy %}
                                            {% trans with {'{dataPrivay}': dataPrivacy,'{url}': server.url,'{privacyUrl}':server.privacyPolicy} %}
                                                Ich habe die
                                                <a href="{dataPrivay}" target="_blank" referrerpolicy="no-referrer">
                                                    <u>Datenschutzhinweise von Jitsi Admin</u>
                                                    <i class="fa fa-external-link-alt"></i>
                                                </a>
                                                und die
                                                <a href="{privacyUrl}" target="_blank"
                                                   referrerpolicy="no-referrer">
                                                    <u>Datenschutzhinweise von {url}</u>
                                                    <i class="fa fa-external-link-alt"></i>
                                                </a>
                                                gelesen und nehme diese zur Kenntnis.
                                            {% endtrans %}

                                        {% else %}
                                            {% trans with {'{dataPrivay}': dataPrivacy} %}
                                                Ich habe die
                                                <a href="{dataPrivay}" target="_blank" referrerpolicy="no-referrer">
                                                    <u>Datenschutzhinweise von Jitsi Admin</u>
                                                    <i class="fa fa-external-link-alt"></i>
                                                </a>
                                                gelesen und nehme diese zur Kenntnis.
                                            {% endtrans %}
                                        {% endif %}
                                    </p>
                                    {% if not server %}
                                        <p style="font-size: 10px">
                                            {% trans %}
                                                Wir weisen darauf hin, dass Sie durch das klicken auf "Beitreten"
                                                auf einen Jitsi-Meet-Server weitergeleitet werden. Jitsi Admin gibt den "Name" aus
                                                dem Formular an den Jitsi-Meet-Server weiter.
                                            {% endtrans %}
                                        </p>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">

                                </div>

                            </div>


                        </div>

                    </div>

                    {% if not server %}
                        <p>
                            {% trans %}
                                Wer eine datenschutzfreundliche Videokonferenz Plattform sucht die auf dem eigenen Server betrieben
                                wird ist mit dem Open Source Tool Jitsi gut bedient. Jitsi ist eine Alternative zu Zoom. Sie
                                speichert keine Nutzerdaten und ermöglicht die verschlüsselte Anwendung.
                            {% endtrans %}
                        </p>
                    {% endif %}
                </div>
                <div class="card-footer text-center">
                    <a href="{{ path('index') }}" class="btn btn-outline-danger btn-sm">{{ 'Startseite'|trans }}</a>
                    <a href="{{ path('dashboard') }}" class="btn btn-outline-elegant btn-sm">{{ 'Dashboard'|trans }}</a>
                    <a href="{{ path('register_keycloak') }}"
                       class="btn btn-outline-cyan btn-sm">{{ 'Registrieren'|trans }}</a>
                    <a href="{{ helpUrlParticipants }}" target="_blank"
                       class="btn btn-outline-amber btn-sm">{{ 'Hilfe'|trans }}</a>
                    {% if server is defined and  server is not null and server|validateLicense and server.showStaticBackgroundColor and server.staticBackgroundColor is not null %}

                    {% elseif image is not null %}
                        <br>
                        <a href="{{ image['photographer_url'] }}" target="_blank" referrerpolicy="no-referrer"
                           rel="noreferrer noopener">
                            Image by {{ image['photographer'] }} </a>
                        <a href="https://www.pexels.com" target="_blank" referrerpolicy="no-referrer"
                           rel="noreferrer noopener"> provided by <img height="30px"
                                                                       src="{{ asset('images/pexels.png') }}"/>
                        </a>

                    {% endif %}
                </div>
            </div>

        </div>
    </div>

    {{ include('base/__snack.html.twig') }}
{% endblock %}
